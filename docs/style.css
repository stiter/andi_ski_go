body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f0f8ff; /* AliceBlue background */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
}

#game-container {
    position: relative;
    width: 1024px;
    height: 640px; /* 16:10 ratio */
    max-width: 98vw;
    max-height: 98vh;
    aspect-ratio: 16 / 10;
    background: linear-gradient(to bottom, #e0f7fa 0%, #ffffff 100%);
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    border-radius: 8px;
    overflow: hidden;
    margin: auto; /* Ensure centering */
    transition: filter 1s ease;
}

/* Mobile Adaptation (iPhone) */
@media screen and (max-width: 600px) {
    body {
        background-color: #333;
        /* Force landscape orientation via rotation if in portrait */
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    #game-container {
        /* Lock aspect ratio on mobile too */
        aspect-ratio: 16 / 10;
        
        /* 
           Rotated 90deg clockwise.
           Width -> Along Phone Height (100vh)
           Height -> Along Phone Width (100vw)
        */
        width: 100vh;      /* Try to fill phone height */
        height: auto;      /* Let ratio determine height */
        
        /* But constrained by phone width */
        max-height: 100vw; 
        max-width: 160vw; /* 1.6 * 100vw */

        border-radius: 0;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(90deg);
        transform-origin: center center;
        
        /* Ensure it doesn't overflow */
        box-shadow: none; /* Optional: remove shadow on full screen mobile */
    }

    /* Adjust controls for rotated view */
    .mobile-ctrl-group {
        /* In rotated view: 
           bottom of screen -> right side of container
           left of screen -> top of container
           right of screen -> bottom of container
        */
        bottom: 20px; 
    }
    
    /* Reposition buttons because the container is rotated */
    /* Left/Right buttons need to be at the 'bottom-left' of the physical screen */
    /* Physical Bottom-Left = Container Bottom-Right (after 90deg rotation? No) */
    
    /* 
       Screen:
       [   Top   ]
       [ L     R ]
       [ Bottom  ]
       
       Container (Rotated 90deg clockwise):
       [ Left  ] -> Top of screen
       [ Right ] -> Bottom of screen
       
       We need to be careful.
       Let's assume the user holds the phone sideways.
       Wait, the user wants "Landscape View".
       If they rotate the phone, the browser usually handles it.
       BUT if they hold it portrait, we want to FORCE it to look like landscape (sideways).
       
       If we rotate 90deg:
       Container Width (Long) aligns with Phone Height.
       Container Height (Short) aligns with Phone Width.
    */
}

#game-container.dark-mode {
    filter: brightness(0.7) contrast(1.1);
}

#game-svg {
    width: 100%;
    height: 100%;
    display: block;
}

#ui-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; 
    z-index: 10;
}

#score-board {
    position: absolute;
    top: 20px;
    right: 20px;
    left: auto;
    background: #0288d1; /* Blue background */
    color: white;
    padding: 15px 30px;
    border-radius: 50px; /* Fully rounded */
    font-size: 24px;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1.2;
}

#score-board span {
    font-size: 32px;
}

#reverse-warning-icon {
    margin-top: 5px;
    border: 3px solid #ff3d00;
    color: #ff3d00;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 4px 8px;
    font-weight: bold;
    font-size: 16px;
    border-radius: 4px;
    font-family: monospace;
    box-shadow: 0 0 5px rgba(255, 61, 0, 0.5);
}

.blink {
    animation: blinker 1s linear infinite;
}

@keyframes blinker {
    50% {
        opacity: 0;
    }
}

#level-display {
    display: none; /* Hide level for now to match cleaner UI */
}

/* Add a separate style for the "SCORE" label text if we want to match exactly,
   but for now we just style the whole block.
   Actually, the reference has "SCORE" small and number big.
*/

#instructions {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(255, 255, 255, 0.8);
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 16px;
    color: #333;
    pointer-events: none;
    z-index: 10;
}

@media screen and (max-width: 600px) {
    #instructions {
        font-size: 12px;
        padding: 5px 10px;
        width: 90%;
        text-align: center;
        top: 10px;
    }
}

#countdown-display {
    position: absolute;
    top: 80px;
    width: 100%;
    text-align: center;
    color: #ff3d00;
    font-weight: bold;
    text-shadow: 2px 2px 0 #fff;
    pointer-events: none;
    z-index: 100;
}
#countdown-display.warning {
    color: #ff9800; /* Orange for warning */
}
.label { font-size: 24px; letter-spacing: 2px; }
.value { font-size: 48px; font-family: 'Courier New', monospace; }

/* Tablet/Mobile Controls */
#mobile-controls {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 1000;
}

.mobile-ctrl-group {
    position: absolute;
    bottom: 30px;
    display: flex;
    gap: 15px;
    pointer-events: auto; /* Enable interaction */
    z-index: 1000; /* Ensure on top */
}

#mobile-left-controls {
    left: 30px;
}

#mobile-right-controls {
    right: 30px;
}

.ctrl-btn {
    width: 80px;
    height: 80px;
    background: rgba(2, 136, 209, 0.7);
    color: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    font-weight: bold;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    cursor: pointer;
    border: 2px solid white;
    transition: transform 0.1s, background-color 0.1s;
}

.ctrl-btn:active, .ctrl-btn.active {
    background: rgba(2, 136, 209, 0.9);
    transform: scale(0.9);
}

#jump-btn {
    width: 100px;
    height: 100px;
    background: rgba(230, 126, 34, 0.8);
    font-size: 20px;
}

#jump-btn:active, #jump-btn.active {
    background: rgba(230, 126, 34, 1);
    transform: scale(0.9);
}

.key {
    background: #fff;
    color: #333;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    margin: 0 2px;
}

#game-over, #victory, #start-screen {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    padding: 40px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    pointer-events: auto;
}

#start-screen h1 {
    font-size: 36px;
    color: #e67e22;
    text-shadow: 2px 2px 0px #333;
    margin-bottom: 20px;
}

.hidden {
    display: none;
}

h1 {
    margin-top: 0;
    color: #2c3e50;
}

button {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 20px;
    transition: background 0.2s;
}

button:hover {
    background: #2980b9;
}

#victory h1 {
    color: #27ae60;
}

#victory button {
    background: #27ae60;
}

#victory button:hover {
    background: #219150;
}
